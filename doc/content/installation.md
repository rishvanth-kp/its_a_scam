# Installation

It's a scam is dependent on `HTSlib` and `gcatlib`. `HTSlib` can be
downloaded from [here](https://www.htslib.org/download/) and 
can be installed by following the procedure under 
'Basic Installation' described 
[here](https://github.com/samtools/htslib/blob/develop/INSTALL)

The installation for `gcatlib` is described 
[here](https://github.com/rishvanth-kp/gcatlib). 

`its_a_scam` can be obtained from 
[here](https://github.com/rishvanth-kp/its_a_scam/releases).

Untar the source files using:
```
tar -xf its_a_scam-0.0.1.tar.gz
```

Create a build directory with:
```
cd its_a_scam-0.0.1
mkdir build 
cd build
```

`its_a_scam` is installed using the `autotools` build system.  The first
step is to run a configuration script to generate the required
Makefiles. The parameters to `configure` will vary based on where the
dependent libraries are installed, and where we would like `its_a_scam`
to be installed. 

If `HTSlib` and `gcatlib` are installed in the standard system paths
(typically `/usr/bin` and `/usr/lib`), and if we would like `its_a_scam`
to be installed in the standard system paths, use the following: 
```
../configure
```

If `HTSlib` and `gcatlib` are installed in non-standard directories,
the `configure` script should be executed with:
```
../configure CPPFLAGS='-I/path_to_htslib/include -I/path_to_gcatlib/include' 
LDFLAGS='-L/path_to_htslib/lib -L/path_to_gcatlib/lib'
```

To install its_a_scam in a non-standard directory use:
```
../configure --prefix installation_path
```

Append the `CPPFLAGS` and `LDFLAGS` to the above command if any of the
dependent libraries are in non-standard paths.


The configuration is now complete and the build system is ready to
compile all the programs with:
```
make [-j threads]
```
This will generate the programs into the `build` directory.


Finally (optionally), install its_a_scam with:
```
make install
```
This will copy all the programs into `installation_path/bin`.


The installation can be tested by running any executable. On successful
installation the you will an output describing the program's arguments. 

If you get the following error message 
`error while loading shared libraries: libhts.so.3: cannot open shared object file: No such file or directory `, 
it likely means that `HTSlib` is in a non-standard path and that is not
know to the program. This can be fixed adding the path to
`LD_LIBRARY_PATH` environment variables:
```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path_to_htslib/lib/
```


Of note, if you have cloned the Git repo, it does not include the
`configure` script. This can be generated by executing:
```
autoreconf -i
```
After which the configuration and installation can proceed as usual.

