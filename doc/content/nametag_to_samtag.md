# nametag_to_samtag 


## Description
Mappers designed to whole genome samples typically do not have an to
keep track of a cell barcode. This can be overcome by appending the cell
barcode to the name of the respective read's fastq name.  Thus, the
`QNAME` field of the aligned SAM file contains the cell barcode. However,
many down stream tools require the cell barcode in a separate SAM
field. This programs parses the QNAME to extract the cells barcode and
creates a SAM filed for it. 

## Parameters
```
nametag_to_samtag [options]
  -a aligned SAM/BAM file [required]
  -o out SAM file [required]
  -d name split delimeter [default: ":"]
  -c barcode field in name [default: 7]
  -t SAM tag to add barcode to [default: CB]
  -z SAM tag type [default: Z]
  -s suffix to add to output barcode [default: \"\"]" << endl;
```

`-a`: The input aligned SAM or BAM file. The cell barcode
should be encoded in the query name (QNAME) field, see options [Required].

`-o`: Output file prefix to name out files. [Required].

`-d`: Used when the cell barcode is encoded as a part of the query name
(QNAME field). Split the QNAME by the specified delimiter. [Default:
":"]. 

`-c`:  Split the QNAME by the delimiter specified by `-d` and take the
barcode as the value in the columns specified by `-c` (0 based). For
example, reads that are generated by Illumina sequencers have a FASTQ
names that have 7 fields that are separated by a ":", and the cell
barcode is typically added as the 8th field. [Default: 7].   

`-t`: The name of the SAM field put the cell barcode in. Has to be
two-character string according to the SAM specifications.  [default: CB]

`-z`: The type of the SAM field. `Z` indicates a printable string, and
is the appropriate type for a cell barcode string. [default: Z].

`-s` Suffix to add to the end of the barcode. This parameter is
useful to make the barcode format consistent with tools that suffix the
barcodes with a `-1`. [Default: none].
 
## Input and output file description
### Description of input files
A SAM/BAM file that has a cell barcode encoded in QNAME. The input
can be a single or paired end aligned file. 

### Description of output files
A SAM file with an addition tag that contains the cell barcode. 
The QNAME is not changed, i.e, it still contains the cell barcode. 
Of note, the output has to be SAM file at the moments, and will
be upgraded to output both SAM and BAM files in the future. 
