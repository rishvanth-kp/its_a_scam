# its_a_scam

**I**t's a scam **T**o **S**ell **A**nother **S**ingle **C**ell
**A**nalysis **M**ethod (It's a scam) is a collection of programs to
pre-process and quality control single cell data.

The era of designing bioinformatic pipelines using open source
tools is giving way to monolithic, and often proprietary, tools designed
for end-to-end analysis. While these tools can be convenient for going
from sequencing data to an almost complete data analysis "in a few
clicks", they are severely limiting to perform any custom analysis. We
developed its_a_scam for processing and quality control of single cell
genomic data, freeing users from the reliance on proprietary tools for
single cell data analysis.

its_a_scam is built of top on `gcatlib` and `HTSlib`, and provides tools
for wide range of single cell data processing and quality control.  It's
a scam can be used in conjugation with commonly used open source tools
to build entire single cell analysis pipelines. 

## Documentation
The documentation of its_a_scam and a detailed description of analysis
procedure are at <https://its-a-scam.readthedocs.io/>

## Getting started
After installation, its_a_scam can be used for scRNA-seq and scATAC-seq
count matrix generation and quality control. Refer to following
documents to get started:

1. [10x scATAC-seq count matrix generation](
https://its-a-scam.readthedocs.io/en/latest/10x_atac_seq/).

1. scRNA-seq count matrix generation: There are several well
designed tools already available for this task. We describe the procedure 
to get started with using STARsolo for [10x data](
https://its-a-scam.readthedocs.io/en/latest/10x_gex/) and for
[Parse data](https://its-a-scam.readthedocs.io/en/latest/10x_gex/) for
Parse data.

1. [scATAC-seq quality control](
https://its-a-scam.readthedocs.io/en/latest/10x_atac_seq_qc/).

1. [scRNA-seq quality control](
https://its-a-scam.readthedocs.io/en/latest/sc_gex_qc/).

## Installation

##### Preparation
It's a scam is dependent on `HTSlib` and `gcatlib`. `HTSlib` can be
downloaded from [here](https://www.htslib.org/download/) and 
can be installed by following the procedure under 
'Basic Installation' described 
[here](https://github.com/samtools/htslib/blob/develop/INSTALL)

The installation for `gcatlib` is described 
[here](https://github.com/rishvanth-kp/gcatlib). 

`its_a_scam` can be obtained from 
[here](https://github.com/rishvanth-kp/its_a_scam/releases).

Untar the source files using:
```
tar -xf its_a_scam-x.y.z.tar.gz
```

Create a build directory with:
```
cd its_a_scam-x.y.z
mkdir build 
cd build
```

##### Configure

`its_a_scam` is installed using the `autotools` build system.  The first
step is to run a configuration script to generate the required
Makefiles. The parameters to `configure` will vary based on where the
dependent libraries are installed, and where we would like `its_a_scam`
to be installed. 


1) The most likely scenario, where `HTSlib` and `gcatlib` are not in the
the standard system paths (typically `/usr/bin` and `/usr/lib`), and to
install its_a_scam in a non-standard path:

```
../configure --prefix=path_to_install_its_a_scam 
CPPFLAGS='-I/path_to_htslib/include -I/path_to_gcatlib/include' 
LDFLAGS='-L/path_to_htslib/lib -L/path_to_gcatlib/lib'
```


2) If `HTSlib` and `gcatlib` are installed in the standard system paths
(typically `/usr/bin` and `/usr/lib`), and if we would like `its_a_scam`
to be installed in the standard system paths, use the following: 

```
../configure
```

3) If `HTSlib` and `gcatlib` are installed in non-standard directories,
the `configure` script should be executed with:

```
../configure CPPFLAGS='-I/path_to_htslib/include -I/path_to_gcatlib/include' 
LDFLAGS='-L/path_to_htslib/lib -L/path_to_gcatlib/lib'
```

4) To install its_a_scam in a non-standard directory, and if `HTSlib`
and `gcatlib` are in the standard system paths use:

```
../configure --prefix=path_to_install_its_a_scam
```


Of note, if you have cloned the Git repo, it does not include the
`configure` script. This can be generated by executing:
```
autoreconf -i
```
After which the configuration can proceed as usual.


##### Build

The configuration is now complete and the build system is ready to
compile all the programs with:
```
make [-j threads]
```
This will generate the programs into the `build` directory.

##### Install (optional)

Finally (optionally), install its_a_scam with:
```
make install
```
This will copy all the programs into `installation_path/bin`.


##### Testing

The installation can be tested by running any executable. On successful
installation the you will an output describing the program's arguments. 

If you get the following error message 
`error while loading shared libraries: libhts.so.3: cannot open shared object file: No such file or directory `, 
it likely means that `HTSlib` is in a non-standard path and that is not
know to the program. This can be fixed adding the path to
`LD_LIBRARY_PATH` environment variables:
```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path_to_htslib/lib/
```


## Contact
Rishvanth Prabakar: kaliapp@cshl.edu. Please let me know any issues,
feedback, or ways to improve this tool. If you would like any other
metrics or programs added in, please let me know those as well. 

## Copyright and License Information
Copyright (C) 2025 Rishvanth Prabakar

Authors: Rish Prabakar

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc.,
51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
